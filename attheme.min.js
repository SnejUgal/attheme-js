"use strict";class Attheme{constructor(t,e){if(t||(t=""),t=Attheme._parseText(t),e){let t;if("object"==typeof e)t=e;else{if(!window.defaultVariablesValues)throw new Error("`fillWithefaults` option is set to true, but `defaultVariablesValues` is not defined outside.\nIf defaults values are defined another way, pass them instead of `fillWithDefaults`");t=window.defaultVariablesValues}for(let e in t)this[e]=t[e]}for(let e in t)this[e]=t[e];t[Attheme.IMAGE_KEY]&&(this[Attheme.IMAGE_KEY]=t[Attheme.IMAGE_KEY])}asText(t){return Attheme.asText(this,t)}static asText(t,e){const i=t=>t.toString(16).padStart(2,"0"),s=t=>parseInt(t,16);let r="";for(let a in t){const l=i(t[a].red),n=i(t[a].green),o=i(t[a].blue),f=i(t[a].alpha),h=`#${"ff"==f?"":f}${l}${n}${o}`,u=(s(`${f}${l}${n}${o}`)<<0)+"";let d;if(e&&"auto"!=e)if("hex"==e)d=h;else{if("int"!=e)throw new Error("The `shorthand` option value is invalid");d=u}else d=h.length>u.length?u:h;r+=`${a}=${d}\n`}return t[Attheme.IMAGE_KEY]&&(r+=`WPS\n${t[Attheme.IMAGE_KEY]}\nWPE\n`),r}static _parseText(t=""){if("string"!=typeof t)throw new Error("Attheme.parseText requires a string");const e=t=>t.toString(16).padStart(2,"0"),i=t=>parseInt(t,16),s=t.split("\n");let r={};for(let t=0;t<s.length;t++){let a=s[t];if(~a.indexOf("//")&&(a=a.split("//")[0]),"WPS"==(a=a.trim())){let e=s.indexOf("WPE");-1==e&&(e=s.length),r[Attheme.IMAGE_KEY]=s.slice(t+1,e).join("\n");break}if(!a||!/=/.test(a))continue;const[l,n]=a.split("=");let o=null;o={red:i((o=n.startsWith("#")?n.slice(1).padStart(8,"f"):e(parseInt(n)>>>0).padStart(8,"0")).slice(2,4)),green:i(o.slice(4,6)),blue:i(o.slice(6,8)),alpha:i(o.slice(0,2))},r[l]=o}return r}static get IMAGE_KEY(){return Symbol.for("image")}}